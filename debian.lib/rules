#!/usr/bin/make -f

export DEB_BUILD_MAINT_OPTIONS = hardening=+all

%:
	dh $@ --buildsystem=cmake

override_dh_auto_test:
	dh_auto_test --buildsystem=cmake

override_dh_auto_configure:
	dh_auto_configure -- \
		-DBUILD_STATIC_AND_SHARED=1 \
		-DCMAKE_BUILD_TYPE=RelWithDebInfo \
		-DBUILD_AVX512=on \
		-DBUILD_AVX512VBMI=on \
		-DTEST_XDPSCAN=ON

override_dh_missing:
	dh_missing --fail-missing
